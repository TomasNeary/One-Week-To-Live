----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
--
-- em_mapIconBase
--
--
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

print("Loading ERIS_MINIMAP_MAPICONS");

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

em_mapIconBase = {};

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getAlpha()
	return self.a;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getColor()
	return self.r, self.g, self.b, self.a;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getClass()
	return self.class;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getLocation()
	return self.x, self.y;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getObj()
	return self.obj;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getX()
	return self.x;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:getY()
	return self.y;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setAlpha(_a)
	self.a = _a or self.a;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setColor(_r, _g, _b, _a)
	self.r = _r or self.r;
	self.g = _g or self.g;
	self.b = _b or self.b;
	self.a = _a or self.a;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setClass(_class)
	self.class = _class;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setLocation(_x, _y)
	self.x, self.y = _x, _y;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setObj(_obj)
	self.obj = _obj;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setX(_x)
	self.x = _x;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:setY(_y)
	self.y = _y;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:updateTimeStamp(_updateTime)
	self.lastupdateTime = self.updateTime;
	self.updateTime = _updateTime;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:updateLocation(_x, _y)
	if self.obj or _x and _y then
		self.lastX, self.lastY = self.x, self.y;
		self.x, self.y = _x or self.obj:getX(), _y or self.obj:getY();
	else
		self.lastX, self.lastY = 0, 0;
		self.x, self.y = 0, 0;
	end;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:update(_updateTime)
	self:updateTimeStamp(_updateTime);
	self:updateLocation();
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:initID()
	self.ID = self.obj:getID();
	self.iconID = self.class .. self.ID;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function em_mapIconBase:new()
	local o = {};

	setmetatable(o, self)
	o.__index = self;

	o.obj = nil;
	o.class = "base";
	o.iconID = "0";

	o.x = 0;
	o.y = 0;

	o.lastX = 0;
	o.lastY = 0;

	o.minViewDist = 5;
	o.maxViewDist = 30;
	o.maxViewAngle = 70;

	o.delta = 0;

	o.rect = {x1=0, x2=0, x3=0, x4=0, y1=0, y2=0, y3=0, y4=0};

	o.iconData = "";
	o.iconDataExt = "";

	o.iconTexture = nil;
	o.iconTextureExt = nil;

	o.r = 1;
	o.g = 1;
	o.b = 1;
	o.a = 1;

	o.fadeStep = 0.1;

	o.mapScale = false;

	o.updateTime = 0;
	o.lastupdateTime = 0;

	return o;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------